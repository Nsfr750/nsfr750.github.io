---
lang: ja
lang-niv: fonto
lang-ref: 018-jbk
layout: page
title: 'OpenPGP'
---

# OpenPGP GUI アプリケーション ドキュメント

**OpenPGP GUI アプリ**の公式ドキュメントへようこそ。

## 概要
このアプリケーションは、OpenPGPキー管理、暗号化、復号化、メッセージ署名、検証、SSL証明書生成のためのモダンで使いやすいインターフェースを提供します。すべての暗号化操作はプライバシー保護のためローカルで実行されます。

# 特徴

- ttkbootstrapを使用したモダンなUI（Superheroテーマ）
- OpenPGPキーペアの生成、読み込み、エクスポート
- キー名、メール、パスフレーズの設定とフィンガープリントの表示
- メッセージの暗号化と復号化
- メッセージの署名と検証（分離署名）
- ASCIIアーマー形式（.asc）での公開鍵エクスポート
- セキュリティチェックのためのキーフィンガープリントの視覚化
- カスタムCN（コモンネーム）でのSSL証明書生成
- ワンクリックでの全フィールドクリア/リセット
- **一元化されたロギングシステム**（情報、警告、エラー、未処理の例外）
- **リアルタイムフィルタリング対応ログビューア**（ALL、INFO、WARNING、ERROR）
- カスタムログエントリ用の`log_info`、`log_warning`、`log_error`関数
- ログビューアでの自動トレースバックキャプチャと表示
- About、Help、Log Viewer、Sponsor、Versionダイアログを備えた動的メニューバー
- セマンティックバージョニングとバージョン情報
- モジュール構造（`struttura`、`gui`など）
- 拡張性とテーマ設定が容易（ttkbootstrap経由）

# はじめに

## 要件
- Python 3.9以上
- PySide6（要件に含まれる）
- pgpy（要件に含まれる）
- cryptography（要件に含まれる）
- pyperclip（要件に含まれる）

> **注**: アプリケーションは、よりモダンでメンテナンス性の高いUIを実現するため、Tkinter/ttkbootstrapからPySide6に移行されました。

## インストール
1. このリポジトリをクローンまたはダウンロードします。
2. （オプション）仮想環境を作成：
   ```
   python -m venv venv
   venv\Scripts\activate
   ```
3. 依存関係をインストール：
   ```
   pip install -r requirements.txt
   ```

## アプリの実行
プロジェクトのルートから実行：
```
python main.py
```

インポートエラーが表示される場合は、サブフォルダ内ではなくプロジェクトのルートから実行していることを確認してください。

# ユーザーガイド

## メインウィンドウの概要
- キー生成のため、名前、メール、パスフレーズを入力します。
- アルゴリズムを選択します（現在はRSA、今後追加予定）。
- ボタンを使用してキーを生成、読み込み、またはエクスポートします。
- 読み込み/生成されたキーのフィンガープリントが確認用に表示されます。
- メッセージの暗号化、復号化、署名、検証のためのテキストエリアを使用します。
- 公開鍵をエクスポートして安全に共有します。
- GUIからSSL証明書を生成します。
- 「クリア」ボタンですべてのフィールドをリセットします。

## メニューバー
- **ファイル**: 公開鍵のエクスポート、終了
- **ログ**: ログの表示（ALL、INFO、WARNING、ERRORでフィルタリング可能）
- **ヘルプ**: ヘルプ、バージョン情報、スポンサー情報

## ロギングとログビューア
- すべての情報、警告、エラー、未処理の例外が自動的に記録されます。
- カスタムログには`log_info(msg)`、`log_warning(msg)`、`log_error(msg)`を使用します。
- ログビューア（ログ > ログの表示）で、レベル別にログをフィルタリングして表示できます。
- ログファイルがない場合、最後のランタイムトレースバックが利用可能であれば表示されます。

## ヒント
- すべての暗号化操作はローカルで行われます（クラウドは使用しません）。
- 最適な結果を得るには、強力なパスフレーズを使用してください。
- ログウィンドウにはフィードバックとエラーの詳細が表示されます。

# 高度な使い方

## 公開鍵のエクスポート
- 「公開鍵をエクスポート」ボタンまたはメニュー項目を使用して、公開鍵をASCIIアーマー形式（.asc）で保存します。

## フィンガープリントの確認
- セキュリティを強化するため、公開鍵を共有する前に必ずフィンガープリントを確認してください。

## SSL証明書の生成
- 名前フィールドに希望のコモンネーム（CN）を入力します。
- 「SSL証明書を生成」ボタンをクリックして自己署名証明書を作成します。

## アプリの拡張
- `main_window.py`のキー生成ロジックを拡張して、より多くのアルゴリズム（ECC、Ed25519など）をサポートできます。
- GUIには、簡単なテーマ設定とカスタマイズのためにttkbootstrapを使用しています。

## ロギングとデバッグ
- すべてのアクション、警告、エラー、未処理の例外は`traceback.log`に記録されます。
- カスタムログエントリにはコード内で`log_info`、`log_warning`、`log_error`を使用します。
- ログビューアはALL、INFO、WARNING、ERRORでのフィルタリングをサポートします。
- 未処理の例外は自動的に記録され、ログビューアに表示されます（トレースバック付き）。

## サポートと質問
- バグや機能リクエストについては、GitHubでイシューを開いてください。
- 連絡先と貢献に関する情報は`README.md`を参照してください。

# 開発者ガイド

開発者の皆様へ、OpenPGP GUIアプリへの貢献と拡張に必要な基本情報を提供します。

---

## プロジェクト構造
- `main.py` — エントリーポイント、メインウィンドウを起動
- `gui/` — すべてのGUIコンポーネント（メインウィンドウ、ウィジェット、ダイアログ）
- `struttura/` — コアロジック、ダイアログ、ユーティリティ、バージョン管理、ヘルプ/バージョン情報など
- `docs/` — ドキュメント
- `requirements.txt` — Pythonの依存関係

## 主要技術
- **Python 3.x**
- **Tkinter** — GUIフレームワーク（テーマ設定にttkbootstrapを使用）
- **pgpy** — OpenPGP暗号化
- **cryptography** — SSL証明書生成
- **Pillow** — （オプション）アイコン用

## 貢献方法
1. リポジトリをフォークしてクローンします。
2. 仮想環境を作成し、依存関係をインストールします。
3. PEP8に従い、コードをモジュール化します。
4. 新機能を文書化し、`CHANGELOG.md`を更新します。
5. 可能であればテストを追加または更新します。
6. 明確な説明付きでプルリクエストを開きます。

## 機能の追加
- 新しいアルゴリズム（例：ECC）を追加するには、`main_window.py`のキー生成ロジックを拡張します。
- 新しいGUIコンポーネントの場合は、`gui/`にウィジェットを追加し、ロジックとUIを分離します。
- 一貫した見た目のために`ttkbootstrap`スタイルを使用します。

## テスト
- 新機能とバグ修正のためのテストを追加します。
- 手動テスト：`python main.py`を実行し、すべてのGUI機能を使用します。
- （オプション）自動テストのためにCI/CDと統合します。

## コードスタイル
- PEP8に従います。
- パブリックな関数/クラスにはdocstringを使用します。
- UIとロジックは可能な限り分離します。

## ロギングとデバッグ
- カスタムログエントリには、コード内のどこでも`log_info(msg)`、`log_warning(msg)`、`log_error(msg)`を使用します。
- すべてのログは`traceback.log`に保存され、ログビューアに表示されます。
- ログビューアはALL、INFO、WARNING、ERRORでのフィルタリングをサポートします。
- 未処理の例外は自動的に記録され、ログビューアに表示されます（トレースバック付き）。

## サポートと質問
- バグや機能リクエストについては、GitHubでイシューを開いてください。
- 連絡先と貢献に関する情報は`README.md`を参照してください。

---

## 高度なトピック

### APIリファレンス

アプリケーションはモジュール化されています：コアロジックは`struttura/`に、GUIは`gui/`にあります。

**主なクラスと関数:**
- `MainWindow`（`gui/main_window.py`）: メインGUIロジックとイベント処理
- `gen_key`、`export_pubkey`、`clear_fields`など: 暗号化操作のためのメソッド
- `Help`、`About`、`LogViewer`など: `struttura/`内のダイアログとユーティリティ
- `get_version()`（`struttura/version.py`）: 現在のバージョン文字列を返す

詳細はコード内のdocstringと、使用フローについては`docs/user_guide.md`を参照してください。

### 拡張例

#### 新しいキーアルゴリズムの追加
1. `gui/main_window.py`で、アルゴリズム選択ドロップダウンを見つけます。
2. 新しいアルゴリズム（例：ECC、Ed25519）をドロップダウンオプションに追加します。
3. キー生成ロジックで、`pgpy`を使用して新しいアルゴリズムの処理を実装します。
4. 十分にテストし、ドキュメントを更新します。

#### カスタムウィジェットの追加
1. `gui/widgets.py`または新しいファイルにウィジェットを作成します。
2. 必要に応じてスタイルを適用します。
3. メインウィンドウまたは他のコンポーネントに統合します。
4. 機能をテストし、必要に応じてドキュメントを更新します。
