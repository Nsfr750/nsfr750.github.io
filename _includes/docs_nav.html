<div class="docs-nav">
  <button class="docs-dropbtn">
    {{ site.data.translations[page.lang].documentation | default: 'Documentation' }} ▼
  </button>
  <div class="docs-dropdown-content">
    {% assign docs_dir = page.lang | append: '/docs/' %}
    {% assign all_docs = site.pages | where_exp: "item", "item.path contains docs_dir" | sort: 'title' %}
    
    {% for doc in all_docs %}
      {% assign doc_name = doc.path | split: '/' | last | replace: '.md', '' %}
      <a href="/{{ page.lang }}/docs/{{ doc_name }}" class="doc-link">
        {{ doc_name | replace: '_', ' ' | capitalize }}
      </a>
    {% endfor %}
  </div>
</div>

<style>
.docs-nav {
  position: relative;
  display: inline-block;
  width: 100%;
  margin: 10px 0;
}

.docs-dropbtn {
  background-color: #f8f8f8;
  color: #333;
  padding: 10px 15px;
  border: 1px solid #ddd;
  border-radius: 4px;
  cursor: pointer;
  width: 100%;
  text-align: left;
  font-size: 16px;
  transition: all 0.3s ease;
  margin-bottom: 5px;
}

.docs-dropbtn:hover {
  background-color: #e7e7e7;
}

.docs-dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 100%;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1000;
  max-height: 70vh;
  overflow-y: auto;
  border-radius: 4px;
  border: 1px solid #ddd;
}

.docs-dropdown-content a {
  color: #333;
  padding: 10px 15px;
  text-decoration: none;
  display: block;
  border-bottom: 1px solid #eee;
  transition: background-color 0.2s ease;
  font-size: 14px;
}

.docs-dropdown-content a:hover {
  background-color: #f1f1f1;
  color: #000;
}

.show {
  display: block;
  animation: fadeIn 0.2s;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Active state for current page */
.docs-dropdown-content a.active {
  background-color: #e0e0e0;
  font-weight: bold;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Toggle dropdown
  const dropBtn = document.querySelector('.docs-dropbtn');
  const dropdownContent = document.querySelector('.docs-dropdown-content');
  
  if (dropBtn && dropdownContent) {
    // Toggle dropdown on button click
    dropBtn.addEventListener('click', function(e) {
      e.stopPropagation();
      dropdownContent.classList.toggle('show');
    });

    // Handle document link clicks
    const docLinks = dropdownContent.querySelectorAll('a');
    docLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        // Let the default navigation happen
        dropdownContent.classList.remove('show');
        
        // Update button text to show current document
        const docTitle = this.textContent.trim();
        dropBtn.textContent = docTitle + ' ▼';
      });
      
      // Highlight current page in the menu
      if (link.getAttribute('href') === window.location.pathname) {
        link.classList.add('active');
        // Update button text to show current document
        const docTitle = link.textContent.trim();
        dropBtn.textContent = docTitle + ' ▼';
      }
    });
  }

  // Close dropdown when clicking outside
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.docs-nav') && dropdownContent) {
      dropdownContent.classList.remove('show');
    }
  });
});
</script>
